{"version":3,"sources":["images/logo.svg","images/close_button.svg","images/open_menu.svg","components/Header.jsx","contexts/CurrentUserContext.js","components/Card.jsx","components/Main.jsx","components/Footer.jsx","components/Form.jsx","components/Login.jsx","components/Register.jsx","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/ImagePopup.jsx","components/ProtectedRoute.jsx","components/InfoTooltip.jsx","utils/token.js","utils/api.js","auth.js","images/success.svg","images/fail.svg","components/App.jsx","index.js"],"names":["Header","email","onSignOut","useState","menuOpen","setMenuOpen","window","innerWidth","widthWindow","setWidthWindow","onClick","addEventListener","Wrapper","Head","Logo","Container","Email","HeaderButton","Button","styled","div","header","logo","opacity","keyframes","button","closeMenu","openMenu","CurrentUserContext","React","createContext","Card","link","likes","name","owner","_id","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","className","src","alt","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","card","key","Footer","Form","headerButtonName","title","submitButtonName","handleLogin","onSubmit","handleChange","to","Title","Forma","Input","type","placeholder","id","required","minLength","maxLength","onChange","FormButton","h1","form","input","Login","onLogin","handlePopupFail","password","data","setData","e","preventDefault","target","value","prevData","Register","onRegister","Subtitle","PopupWithForm","children","buttonTitle","isOpen","onClose","EditProfilePopup","onUpdateUser","setName","description","setDescription","useEffect","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","ref","current","AddPlacePopup","onSubmitCard","cardNameRef","cardLinkRef","ImagePopup","ProtectedRoute","loginIn","props","InfoTooltip","imageLink","altText","infoText","display","Image","img","TOKEN_KEY","setToken","token","localStorage","setItem","getToken","getItem","Api","url","headers","this","fetch","then","res","_getResponseData","method","body","JSON","stringify","items","ok","json","Promise","reject","status","console","log","api","BASE_URL","App","isEditProfilePopupOpen","isOpenEditProfile","isAddPlacePopupOpen","isOpenAddPlace","isEditAvatarPopupOpen","isOpenEditAvatar","selectedCard","isOpenSelectedCard","setCurrentUser","setCards","setLoginIn","setEmail","successRegister","setSuccessRegister","registerFail","setRegisterFail","history","useHistory","tokenCheck","auth","push","catch","err","closeAllPopups","closeRegStatus","all","getUserInfo","getCardsFromServer","userInfo","item","handleEsc","code","document","removeEventListener","userData","Provider","path","response","newdata","success","fail","exact","removeItem","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","user","changeUserInfo","changeAvatar","addNewCard","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b1fc1554.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","export default __webpack_public_path__ + \"static/media/close_button.b9c42c3d.svg\";","export default __webpack_public_path__ + \"static/media/open_menu.a46d5c1c.svg\";","import React, { useState } from 'react';\r\nimport styled, { keyframes } from 'styled-components'\r\nimport logo from '../images/logo.svg'\r\nimport closeMenu from '../images/close_button.svg'\r\nimport openMenu from '../images/open_menu.svg'\r\n\r\nfunction Header({email, onSignOut}){\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const [widthWindow, setWidthWindow] = useState(window.innerWidth)\r\n\r\n  function changeWidth(){\r\n    setWidthWindow(window.innerWidth);\r\n  }\r\n\r\n  window.addEventListener('resize', ()=> changeWidth());\r\n\r\n  function onClick(){\r\n    setMenuOpen(!menuOpen);\r\n  }\r\n\r\n  if(widthWindow>500){\r\n    return(\r\n      <Wrapper >\r\n        <Head>\r\n          <Logo />\r\n          <Container>\r\n            <Email> {email} </Email>\r\n            <HeaderButton onClick = { onSignOut }>Выйти</HeaderButton>\r\n          </Container>\r\n        </Head>\r\n      </Wrapper>\r\n    )\r\n  } else{\r\n    return(\r\n      <Wrapper >\r\n        {menuOpen ? \r\n        <div>\r\n          <Container>\r\n            <Email> {email} </Email>\r\n            <HeaderButton onClick = { onSignOut }>Выйти</HeaderButton>\r\n          </Container>\r\n          <Head>\r\n            <Logo />\r\n            <Button menuOpen={menuOpen} onClick={onClick}/>\r\n          </Head> \r\n        </div> : \r\n        <Head>\r\n          <Logo />\r\n          <Button menuOpen={menuOpen} onClick={onClick}/>\r\n        </Head> }\r\n      </Wrapper>\r\n    )\r\n  }\r\n  \r\n}\r\n\r\nexport default Header;\r\n\r\nconst Wrapper = styled.div`\r\n\r\n`;\r\n\r\nconst Head = styled.header`\r\n  min-height: 74px;\r\n  padding-top: 45px;\r\n  border-bottom: 1px solid rgb(84,84,84, 0.7);\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Logo = styled.div`\r\n  background-image: url(${logo});\r\n  width: 142px;\r\n  height: 33px;\r\n  background-size: cover;\r\n  @media(max-width:880px){\r\n    margin-left:8px;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  @media(max-width:500px){\r\n    flex-direction: column;\r\n    width: 142px;\r\n    align-items: center;\r\n    margin: 0 auto;\r\n  }\r\n`;\r\n\r\nconst Email = styled.div`\r\n  margin-top: 6px;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n  text-align: right;\r\n  color: #FFFFFF;\r\n  margin-right: 24px;\r\n  @media(max-width:500px){\r\n    margin: 40px 0 0;\r\n  }\r\n`;\r\n\r\nconst opacity = keyframes`\r\n  from {\r\n    transform: opacity(1);\r\n  }\r\n  to {\r\n    transform: opacity(0.6);\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 0;\r\n  background-image: url(${({menuOpen}) => menuOpen ? closeMenu : openMenu});\r\n\r\n  background-position: center;\r\n  background-color: rgba(0, 0, 0, 0);\r\n  background-repeat: no-repeat;\r\n  height: 45px;\r\n  width: 45px;\r\n  border: 0;\r\n  cursor: pointer;\r\n  box-shadow: none;\r\n  :hover{\r\n    animation: ${opacity} 1s linear forwards;\r\n  }\r\n`;\r\n\r\nconst HeaderButton = styled.button`\r\n  margin-top: 6px;\r\n  cursor: pointer;\r\n  box-shadow: none;\r\n  font-weight: normal;\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n  text-align: right;\r\n  color: #A9A9A9;\r\n  background-color: transparent;\r\n  border: none;\r\n  padding: 0;\r\n  :hover{\r\n    animation: ${opacity} 1s linear 1 forwards;\r\n  }\r\n  @media(max-width:500px){\r\n    margin-top: 18px;\r\n  }\r\n`;","import React  from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({link, likes, name, owner, _id, onCardClick, onCardLike, onCardDelete}){\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const handleCardClick = () =>{\r\n    onCardClick({link, name});\r\n  }\r\n\r\n  const handleLikeClick = () =>{\r\n    onCardLike({_id, likes});\r\n  }\r\n\r\n  const handleDeleteClick = () =>{\r\n    onCardDelete({_id});\r\n  }\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = owner._id === currentUser._id;\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `${isOwn ? 'card__trash' : 'card__trash_hidden'}`\r\n  ); \r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = likes.some(i => i._id === currentUser._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = (\r\n    `${isLiked ? 'card__like_black' : 'card__like'}`\r\n  ); \r\n  \r\n  return(\r\n    <div className=\"templateCard\">\r\n        <li className=\"card\">\r\n          <button className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n          <img src={link} alt=\"Место из названия\" className=\"card__picture\"  onClick={handleCardClick} />\r\n          <div className=\"card__description\">\r\n            <h3 className=\"card__title\">{name}</h3>\r\n            <div className=\"card__likeContainer\">\r\n              <button className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n              <span className=\"card__likeNumbers\">{likes.length}</span>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}){\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  return(\r\n    <>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__containerImage\">\r\n          <img className=\"profile__image\" src={currentUser.avatar} alt=\"Аватар\" onClick={onEditAvatar} />\r\n        </div>\r\n        <div className=\"profile__info\"> \r\n          <div className=\"profile__edit\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__button\"  onClick={onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__about\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__addPicture\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <ul className=\"cardsList\">\r\n        {cards.map(card => <Card key={card._id} {...card} onCardClick = {onCardClick} onCardLike = {onCardLike} onCardDelete = {onCardDelete} />)}\r\n      </ul>     \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer(){\r\n  return(\r\n    <footer className=\"footer\">\r\n      &copy; 2020 Mesto Russia\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport styled, { keyframes } from 'styled-components'\r\nimport logo from '../images/logo.svg'\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nfunction Form({headerButtonName, title, submitButtonName, handleLogin, onSubmit, handleChange}){  \r\n  return(\r\n    <Wrapper >\r\n      <Header>\r\n        <Logo />\r\n        <Link to={headerButtonName === 'Войти' ? \"/sign-in\" : \"/sign-up\"}><HeaderButton>{headerButtonName}</HeaderButton></Link>\r\n      </Header>\r\n      <Title>{title}</Title>\r\n      <Forma onSubmit={onSubmit}>\r\n        <Input type=\"text\" placeholder={'Email'} id='email-input' name=\"email\"  required minLength=\"2\" maxLength=\"40\" onChange={handleChange} />\r\n        <span className='popup__input_error' id='name-input-error'></span>\r\n        <Input type=\"password\" placeholder={'Пароль'} id='password-input' name=\"password\" required minLength=\"2\" maxLength=\"10\" onChange={handleChange} />\r\n        <span className='popup__input_error' id='about-input-error'></span>\r\n        <FormButton className=\"popup__save\" handleLogin={handleLogin}>{submitButtonName}</FormButton>\r\n      </Forma>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Form;\r\n\r\nconst Wrapper = styled.div`\r\n\r\n`;\r\n\r\nconst Header = styled.div`\r\n  min-height: 74px;\r\n  padding-top: 45px;\r\n  border-bottom: 1px solid rgb(84,84,84, 0.7);\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Logo = styled.div`\r\n  background-image: url(${logo});\r\n  width: 142px;\r\n  height: 33px;\r\n  background-size: cover;\r\n  @media(max-width:880px){\r\n    margin-left:8px;\r\n  }\r\n`;\r\n\r\nconst opacity = keyframes`\r\n  from {\r\n    transform: opacity(1);\r\n  }\r\n  to {\r\n    transform: opacity(0.6);\r\n  }\r\n`;\r\n\r\nconst HeaderButton = styled.button`\r\n  margin-top: 6px;\r\n  cursor: pointer;\r\n  box-shadow: none;\r\n  font-weight: normal;\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n  text-align: right;\r\n  color: #FFFFFF;\r\n  background-color: transparent;\r\n  border: none;\r\n  padding: 0;\r\n  :hover{\r\n    animation: ${opacity} 1s linear 1 forwards;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 900;\r\n  font-size: 24px;\r\n  line-height: 29px;\r\n  text-align: center;\r\n  color: #FFFFFF;\r\n  margin: 60px auto 50px;\r\n`;\r\n\r\nconst Forma = styled.form`\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  margin-bottom: 30px;\r\n  padding: 0;\r\n  width: 358px;\r\n  height: 27px;\r\n  font-weight: normal;\r\n  font-size: 14px;\r\n  line-height: 17px;\r\n  color: #CCCCCC;\r\n  background-color: transparent;\r\n  border: none;\r\n  border-bottom: 2px solid #CCCCCC;\r\n  box-sizing: border-box;\r\n  padding-bottom:11px;\r\n  @media (max-width: 400px) {\r\n    width: 260px;\r\n  }\r\n`;\r\n\r\n\r\n\r\nconst FormButton = styled.button`\r\n  margin-top: 186px;\r\n  font-weight: normal;\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n  color: #000000;\r\n  border: none;\r\n  background: #FFFFFF;\r\n  border-radius: 2px;\r\n`;","import React, { useState } from 'react';\r\nimport Form from './Form';\r\n\r\nfunction Login({handleLogin, onLogin, handlePopupFail}){\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target;\r\n    setData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { email, password } = data;\r\n    if (!email || !password){\r\n      return;\r\n    }\r\n    onLogin(email, password)\r\n  }\r\n\r\n  return(\r\n      <Form\r\n        headerButtonName = {'Регистрация'} \r\n        title = {'Вход'}\r\n        submitButtonName = {'Войти'}\r\n        handleLogin={handleLogin}\r\n        onSubmit={handleSubmit}\r\n        handleChange={handleChange}\r\n      />\r\n  )\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport styled from 'styled-components'\r\nimport Form from './Form';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register({onRegister, handleLogin}){\r\n\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target;\r\n    setData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { email, password } = data;\r\n    onRegister(email, password);\r\n  }\r\n\r\n  return(\r\n    <Wrapper>\r\n      <Form \r\n        headerButtonName = {'Войти'} \r\n        title = {'Регистрация'}\r\n        submitButtonName = {'Зарегистрироваться'}\r\n        onSubmit={handleSubmit}\r\n        handleChange={handleChange}\r\n        handleLogin={handleLogin}\r\n      />\r\n      <Link to = \"/sign-in\"><Subtitle>Уже зарегистрированы? Войти</Subtitle></Link>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Register;\r\n\r\nconst Wrapper = styled.div`\r\n\r\n`;\r\n\r\nconst Subtitle = styled.div`\r\n  font-weight: normal;\r\n  font-size: 14px;\r\n  line-height: 17px;\r\n  text-align: center;\r\n  color: #FFFFFF;\r\n  margin-top: 15px;\r\n  cursor: pointer;\r\n`;","import React from 'react';\r\n\r\nfunction PopupWithForm({title, name, children, buttonTitle, isOpen, onClose, onSubmit}){\r\n  return(\r\n    <div className={isOpen ? `popup popup${name} popup_opened` : `popup popup${name}`}>\r\n          <div className=\"popup__container\">\r\n            <h3 className=\"popup__title\">{title}</h3>\r\n            <form  className={`popup__form popup__form${name}`} onSubmit = {onSubmit}>\r\n              {children}\r\n              <button className=\"popup__save\" >{buttonTitle}</button>\r\n            </form>\r\n            <button className=\"popup__close\" onClick={onClose}></button>\r\n          </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React  from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport {useContext, useState} from 'react';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}){\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] =  useState('');\r\n  const [description, setDescription] =  useState('');\r\n    \r\n  React.useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n  }, [currentUser]); \r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n  \r\n  return(\r\n    <div>\r\n      <PopupWithForm \r\n          title = {'Редактировать профиль'}\r\n          name = {'EditProfile'}\r\n          buttonTitle = {'Сохранить'}\r\n          isOpen = {isOpen}\r\n          children = {\r\n            <>\r\n              <input type=\"text\" value={name} className=\"popup__input popup__name\" id='name-input' required minLength=\"2\" maxLength=\"40\" onChange={handleChangeName}/>\r\n              <span className='popup__input_error' id='name-input-error'></span>\r\n              <input type=\"text\" value={description} className=\"popup__input popup__about\" id='about-input' required minLength=\"2\" maxLength=\"200\" onChange={handleChangeDescription}/>\r\n              <span className='popup__input_error' id='about-input-error'></span>\r\n            </>\r\n          }\r\n          onClose = {onClose}\r\n          onSubmit = {handleSubmit}\r\n        />  \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}){\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar:avatarRef.current.value\r\n    });\r\n  } \r\n\r\n  return(\r\n    <div>\r\n      <PopupWithForm \r\n          title = {'Обновить аватар'}\r\n          name = {'EditProfileAvatar'}\r\n          buttonTitle = {'Сохранить'}\r\n          isOpen = {isOpen}\r\n          children = {\r\n            <>\r\n              <input type=\"url\" ref = {avatarRef} className=\"popup__input popup__linkForAvatar\" name = \"linkAvatar\" id='linkForAvatar-input'  placeholder=\"Ссылка на аватар\" required />\r\n              <span className='popup__input_error' id='linkForAvatar-input-error'></span>\r\n            </>\r\n          }\r\n          onClose = {onClose}\r\n          onSubmit = {handleSubmit}\r\n        /> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup ({isOpen, onClose, onSubmitCard}){\r\n  const cardNameRef = React.useRef();\r\n  const cardLinkRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmitCard({\r\n      name:cardNameRef.current.value,\r\n      link:cardLinkRef.current.value\r\n    });\r\n  } \r\n\r\n  return(\r\n    <div>\r\n      <PopupWithForm \r\n          title = {'Новое место'}\r\n          name = {'AddCard'}\r\n          buttonTitle = {'Создать'}\r\n          isOpen = {isOpen}\r\n          children = {\r\n            <>\r\n              <input type=\"text\" ref = {cardNameRef} className=\"popup__input popup__nameOfPlace\" name = \"name\" id='nameOfPlace-input' placeholder=\"Название\" required minLength=\"1\" maxLength=\"30\" /> \r\n              <span className='popup__input_error' id='nameOfPlace-input-error'></span>\r\n              <input type=\"url\" ref = {cardLinkRef} className=\"popup__input popup__linkForPicture\" name = \"link\" id='linkForPicture-input' placeholder=\"Ссылка на картинку\" required />\r\n              <span className='popup__input_error' id='linkForPicture-input-error'></span>\r\n            </>\r\n          }\r\n          onClose = {onClose}\r\n          onSubmit = {handleSubmit}\r\n        />  \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup({card, onClose}){\r\n  return (\r\n    card ? (\r\n      <div className={\"popup popupPicture popup_opened\"}>\r\n        <div className=\"popupPicture__container\">\r\n          <img src={card.link} alt=\"Место из названия\" className=\"popupPicture__image\" />\r\n          <h3 className=\"popupPicture__title\">{card.name}</h3>\r\n          <button className=\"popup__close\" onClick={onClose}></button>\r\n        </div>\r\n      </div>\r\n    ) : null)\r\n  \r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ loginIn, ...props  }) => {\r\n  return loginIn ? <Route {...props} /> : <Redirect to=\"/sign-in\" />\r\n}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport styled from 'styled-components'\r\n\r\nfunction InfoTooltip({imageLink, altText, infoText, onClose, display}){\r\n  return(\r\n    <Wrapper display = {display}>\r\n      <Container>\r\n        <Image src={imageLink} alt ={altText} />\r\n        <Title>{infoText}</Title>\r\n        <button className=\"popup__closeReg\" onClick={onClose}></button>\r\n      </Container>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  visibility: ${({display}) => display==='on' ? 'visible' : 'hidden'};\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 430px;\r\n  height: 330px;\r\n  background: #FFFFFF;\r\n  box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.15);\r\n  border-radius: 10px;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n  align-items: center; \r\n  @media (max-width:520px){\r\n    width: 280px;\r\n    height: 308px;\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top:60px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-weight: 900;\r\n  font-size: 24px;\r\n  line-height: 29px;\r\n  text-align: center;\r\n  color: #000000;\r\n  margin-top: 32px;\r\n  max-width:358px;\r\n`;","const TOKEN_KEY = 'jwt';\r\n\r\nexport const setToken = (token) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n}\r\n\r\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\r\n\r\nexport const removeToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY)\r\n}","import { getToken} from '../utils/token';\r\n\r\nclass Api{\r\n  constructor({url, headers}){\r\n    this.url = url;\r\n    this.headers = headers;\r\n  }\r\n  \r\n  getUserInfo(){\r\n    return fetch(`${this.url}/users/me`, {\r\n      headers: this.headers\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  getCardsFromServer(){\r\n    return fetch(`${this.url}/cards`, {\r\n      headers: this.headers\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  changeUserInfo({name, about}){\r\n    return fetch(`${this.url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({name, about})\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  changeAvatar(items){\r\n    return fetch(`${this.url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify(items)\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  addNewCard(items){\r\n    return fetch(`${this.url}/cards`, {\r\n      method: 'POST',\r\n      headers: this.headers,\r\n      body: JSON.stringify(items)\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  deleteCard(id){\r\n    return fetch(`${this.url}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked){\r\n    return fetch(`${this.url}/cards/${id}/likes`, {\r\n      method: isLiked ?  'PUT' : 'DELETE',\r\n      headers: this.headers\r\n    })\r\n    .then(res =>{ \r\n      return this._getResponseData(res);\r\n    });\r\n  }\r\n\r\n  _getResponseData(res){    \r\n    if(res.ok){\r\n      return res.json()\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\nconst token = getToken();\r\nconsole.log(token)\r\n\r\nconst api = new Api({\r\n  url: 'http://localhost:3000',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `Bearer ${token}`,\r\n  }\r\n})\r\n\r\nexport default api;\r\n","import { setToken } from './utils/token';\r\n\r\nexport const BASE_URL = 'http://localhost:3000';\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n  .then((response) => {\r\n    if(!response.ok){\r\n      return Promise.reject({\r\n        status:response.status,\r\n      })\r\n    }\r\n    return response.json();\r\n  })\r\n  .then((res) => {\r\n    return res;\r\n  })\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n  .then((response => {\r\n    if(!response.ok){\r\n      return Promise.reject({\r\n        status:response.status,\r\n      })\r\n    }\r\n    return response.json();\r\n  }))\r\n  .then((data) => {\r\n    if (data.token){\r\n      setToken(data.token);\r\n      return data;\r\n    } else {\r\n      return;\r\n    }\r\n  })\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then(res => res.json())\r\n}","export default __webpack_public_path__ + \"static/media/success.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/fail.d4ce2a26.svg\";","import React, { useEffect, useState } from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport api from '../utils/api';\r\nimport { setToken, getToken, removeToken } from '../utils/token';\r\nimport * as auth from '../auth.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport { Route, useHistory} from 'react-router-dom';\r\nimport success from '../images/success.svg';\r\nimport fail from '../images/fail.svg'\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, isOpenEditProfile] =  useState(false);\r\n  const [isAddPlacePopupOpen, isOpenAddPlace] =  useState(false);\r\n  const [isEditAvatarPopupOpen, isOpenEditAvatar] =  useState(false);\r\n  const [selectedCard, isOpenSelectedCard] =  useState(null);\r\n  const [currentUser, setCurrentUser] =  useState({});\r\n  const [cards, setCards] =  useState([]);\r\n  const [loginIn, setLoginIn] =  useState(false);\r\n  const [email, setEmail] = useState({ email: ''});\r\n  const [successRegister, setSuccessRegister] =  useState(false);\r\n  const [registerFail, setRegisterFail] =  useState(false);\r\n  const history = useHistory();\r\n\r\n  const tokenCheck = () => {\r\n    const token = getToken();\r\n    console.log(\"Check token\");\r\n    console.log(token);\r\n    if (!token) {\r\n      return;\r\n    }\r\n    auth.getContent(token).\r\n    then((res) => {\r\n      if (res) {\r\n        console.log(res);\r\n        setLoginIn(true);\r\n        setEmail(res.data.email);\r\n        history.push('/');\r\n      }\r\n    })\r\n    .catch(err => {\r\n      if(err.status===401){\r\n        console.log(\"Токен не передан или передан не в том формате\");\r\n      } else {\r\n        console.log(\"ошибка на сервере\");\r\n      }\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  }, []);\r\n  \r\n  useEffect(()=>{\r\n    Promise.all([ \r\n      api.getUserInfo(), \r\n      api.getCardsFromServer() \r\n    ]) \r\n    .then( \r\n      json=>{ \r\n        const [userInfo, data] = json; \r\n        console.log(userInfo)\r\n        console.log(data)\r\n        setCurrentUser(userInfo)\r\n        const items = data.map(item => ({ \r\n          link: item.link,\r\n          likes: item.likes,\r\n          name: item.name,\r\n          _id:item._id,\r\n          owner:item.owner\r\n          })) \r\n          setCards(items) \r\n        }\r\n    )\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const handleEsc = (e) => {\r\n      const ESC_CODE = 'Escape' ;\r\n      if (e.code === ESC_CODE) {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEsc);\r\n    return () => document.removeEventListener('keydown', handleEsc);\r\n  }, [])\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n  } \r\n\r\n  function handleCardDelete(card){\r\n    api.deleteCard(card._id).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id );\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n  }\r\n\r\n  function handleEditProfileClick(){\r\n    isOpenEditProfile(true);\r\n  }\r\n\r\n  function handleEditAvatarClick(){\r\n    isOpenEditAvatar(true);\r\n  }\r\n\r\n  function handleAddPlaceClick(){\r\n    isOpenAddPlace(true);\r\n  }\r\n\r\n  function handleUpdateUser(user){\r\n    api.changeUserInfo(user)\r\n    .then(res=>{\r\n      setCurrentUser(res)\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n    isOpenEditProfile(false);\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar){\r\n    api.changeAvatar(avatar)\r\n    .then(res=>{\r\n      setCurrentUser(res)\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n    isOpenEditAvatar(false);\r\n  }\r\n\r\n  function handleAddPlaceSubmit(card){\r\n    api.addNewCard(card).then(\r\n      (newCard) => {\r\n      setCards([...cards, newCard]); \r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n    }); \r\n    isOpenAddPlace(false);\r\n  }\r\n\r\n  function closeAllPopups(){\r\n    isOpenEditProfile(false);\r\n    isOpenEditAvatar(false);\r\n    isOpenAddPlace(false);\r\n    isOpenSelectedCard(null);\r\n  }\r\n\r\n  const onRegister = (email, password) =>{\r\n    auth.register(email, password)\r\n    .then((res) => {\r\n      if(res.data){\r\n        setSuccessRegister(true);\r\n        history.push('/sign-in');\r\n      } else {\r\n        setRegisterFail(true);\r\n        history.push('/sign-up');\r\n      }\r\n    })\r\n    .catch(err => {\r\n      setRegisterFail(true);\r\n      if(err.status===400){\r\n        console.log(\"Некорректно заполнено одно из полей\");\r\n      } else {\r\n        console.log(\"Ошибка на сервере\");\r\n      }\r\n    });\r\n  }\r\n  \r\n  const onLogin = (email, password) => {\r\n    auth.authorize(email, password)\r\n    .then((newdata) => {\r\n      if (newdata.token) {\r\n        setToken(newdata.token);\r\n        handleLogin({email, password});\r\n        history.push('/');\r\n      }\r\n    })\r\n    .catch(err => {\r\n      if(err.status===400){\r\n        console.log(\"Не передано одно из полей\");\r\n      } else if(err.status===401){\r\n        console.log(\"Пользователь с email не найден или неверный пароль\");\r\n      } else {\r\n        console.log(\"Ошибка на сервере\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function closeRegStatus(){\r\n    setSuccessRegister(false);\r\n    setRegisterFail(false);\r\n  }\r\n\r\n  const handleLogin = (userData) => {\r\n    setEmail(userData.email);\r\n    setLoginIn(true);\r\n  }\r\n\r\n  const onSignOut = () => {\r\n    removeToken();\r\n    setLoginIn(false);\r\n  }\r\n\r\n  \r\n  return (\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <div className=\"page__container\">\r\n          <Route path=\"/sign-in\">\r\n            <Login \r\n              handleLogin={handleLogin} \r\n              onLogin={onLogin}\r\n            />\r\n            {successRegister ? <InfoTooltip \r\n                imageLink={success}\r\n                altText='success' \r\n                infoText='Вы успешно зарегистрировались!'\r\n                onClose={closeRegStatus} \r\n                display = 'on'\r\n              /> : <InfoTooltip display = 'off'/>\r\n            }\r\n          </Route>\r\n\r\n          <Route path=\"/sign-up\">\r\n            <Register handleLogin={handleLogin}\r\n              onRegister={onRegister}\r\n            />\r\n            {registerFail ? <InfoTooltip \r\n                imageLink={fail}\r\n                altText='fail' \r\n                infoText='Что-то пошло не так!\r\n                          Попробуйте ещё раз.'\r\n                onClose={closeRegStatus} \r\n                display = 'on'\r\n              /> : <InfoTooltip display = 'off'/>\r\n            }\r\n          </Route>\r\n\r\n          <ProtectedRoute exact path=\"/\" loginIn={loginIn} >\r\n            <Header \r\n              email={email}\r\n              onSignOut = { onSignOut }\r\n            />\r\n            <Main \r\n              onEditProfile = {handleEditProfileClick}\r\n              onAddPlace = {handleAddPlaceClick}\r\n              onEditAvatar = {handleEditAvatarClick}\r\n              onCardClick = {isOpenSelectedCard}\r\n              cards = {cards}\r\n              onCardLike = {handleCardLike}\r\n              onCardDelete = {handleCardDelete}\r\n            />\r\n            <Footer />\r\n            \r\n            <EditProfilePopup \r\n              isOpen={isEditProfilePopupOpen} \r\n              onClose={closeAllPopups} \r\n              onUpdateUser = {handleUpdateUser} \r\n            /> \r\n\r\n            <EditAvatarPopup \r\n              isOpen={isEditAvatarPopupOpen} \r\n              onClose={closeAllPopups} \r\n              onUpdateAvatar = {handleUpdateAvatar}\r\n            /> \r\n\r\n            <AddPlacePopup \r\n              isOpen={isAddPlacePopupOpen} \r\n              onClose={closeAllPopups} \r\n              onSubmitCard = {handleAddPlaceSubmit}\r\n            />\r\n\r\n            <PopupWithForm \r\n              title = {'Вы уверены?'}\r\n              name = {'DeleteCard'}\r\n              buttonTitle = {'Да'}\r\n            /> \r\n              \r\n            <ImagePopup \r\n              card = {selectedCard}\r\n              onClose = {closeAllPopups}\r\n            />\r\n          </ProtectedRoute>\r\n        </div>\r\n      </div>\r\n      </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}